<mat-card>
  <mat-card-content>
    <div class="flex align-items-center col-lg-12">
      <div class="flex justify-start col-lg-8">
        <mat-card-title class="text-2xl">Role detail</mat-card-title>
      </div>
      <div class="flex justify-end mx-4 my-5 col-lg-4 mt-4 md:mt-0">
        <div class="hidden sm:block">
          <button
            mat-raised-button
            color="warn"
            class="flex items-center mx-1 p-24 text-white text-sm font-medium shadow-md transition-colors duration-200"
          >
            <mat-icon class="mr-2">reply</mat-icon>
            Back
          </button>
          <button
            mat-raised-button
            class="flex items-center text-white p-24 text-sm font-medium rounded-lg px-4 py-3 shadow-md transition-colors duration-200"
            color="primary"
            type="submit"
          >
            <mat-icon class="mr-2">task_alt</mat-icon>
            Update
          </button>
        </div>
      </div>
    </div>
    <form [formGroup]="roleForm">
      <mat-card-subtitle
        class="mat-subtitle-3 text-1xl f-s-14 f-w-600 m-b-12 d-block ml-2"
        style="color: black"
      >
        Role name
      </mat-card-subtitle>

      <mat-form-field appearance="outline" class="w-100" color="primary">
        <input
          matInput
          formControlName="name"
          required
          [class.is-invalid]="
            roleForm.get('name')?.invalid && roleForm.get('name')?.touched
          "
        />
        @if(isInvalid('name')){
        <mat-error>
          @if(roleForm.get('name')?.errors?.['required']){
          <span> Category name is required. </span>
          } @else if (roleForm.get('name')?.errors?.['minlength']) {
          <span> Category name must be at least 6 characters. </span>
          } @else if (roleForm.get('name')?.errors?.['maxlength']){
          <span> Category name cannot exceed 100 characters. </span>
          }
        </mat-error>
        }
      </mat-form-field>

      <mat-card-subtitle
        class="mat-subtitle-3 text-1xl f-s-14 f-w-600 m-b-12 ml-2 d-block"
        style="color: black"
        >Description</mat-card-subtitle
      >
      <mat-form-field appearance="outline" class="w-100" color="primary">
        <input
          matInput
          formControlName="description"
          required
          [class.is-invalid]="
            roleForm.get('description')?.invalid &&
            roleForm.get('description')?.touched
          "
        />
        @if(isInvalid('description')){
        <mat-error>
          @if(roleForm.get('description')?.errors?.['required']){
          <span> Category description is required. </span>
          } @else if (roleForm.get('description')?.errors?.['minlength']) {
          <span> Category description must be at least 15 characters. </span>
          } @else if (roleForm.get('description')?.errors?.['maxlength']){
          <span> Category description must not exceed 200 characters. </span>
          }
        </mat-error>
        }
      </mat-form-field>

      <mat-card-subtitle
        class="mat-subtitle-3 text-1xl f-s-14 f-w-600 m-b-12 ml-2 d-block"
        style="color: black"
        >Users amount</mat-card-subtitle
      >
      <mat-form-field appearance="outline" class="w-100" color="primary">
        <input
          matInput
          formControlName="usersCount"
          required
          [class.is-invalid]="
            roleForm.get('usersCount')?.invalid &&
            roleForm.get('usersCount')?.touched
          "
          readonly=""
        />
      </mat-form-field>

      <mat-card-subtitle
        class="mat-subtitle-3 text-1xl f-s-14 f-w-600 m-b-12 ml-2 d-block"
        style="color: black"
        >Permissions</mat-card-subtitle
      >

      <section class="example-section">
        @for(groupName of objectKeys(permissionsGrouped); track $index){
        <span class="example-list-section">
          <h3>{{ groupName }}</h3>
          <ul>
            @for (permission of permissionsGrouped[groupName]; track $index) {
            <li>
              <mat-checkbox [checked]="isChecked(permission.value)">
                {{ permission.name }}
              </mat-checkbox>
            </li>
            }
          </ul>
        </span>
        }
      </section>
    </form>
    <div class="sm:hidden">
      <div class="flex justify-between gap-2 mt-4">
        <button
          mat-raised-button
          color="warn"
          class="flex items-center mx-1 p-24 text-white text-sm font-medium shadow-md transition-colors duration-200"
        >
          <mat-icon class="mr-2">reply</mat-icon>
          Back
        </button>
        <button
          mat-raised-button
          class="flex items-center text-white p-24 text-sm font-medium rounded-lg px-4 py-3 shadow-md transition-colors duration-200"
          color="primary"
          type="submit"
        >
          <mat-icon class="mr-2">task_alt</mat-icon>
          Update
        </button>
      </div>
    </div>
  </mat-card-content>
</mat-card>
