<section
  [ngClass]="{
  'py-10': !isEditMode,
}"
>
  <div class="container mx-auto">
    @if (!isEditMode) {
    <div
      class="flex justify-start items-center mb-10 hover:text-red-500 cursor-pointer"
      routerLink="/supplier/onboarding"
    >
      <mat-icon class="mr-2"><i-tabler name="arrow-left"></i-tabler></mat-icon>
      <span class="font-semibold text-base underline">Back</span>
    </div>
    }
    <div class="mb-6">
      @if (!isEditMode) {
      <h1 class="text-2xl font-bold">Add information about your business</h1>
      }@else {
      <h1 class="text-2xl font-bold">Edit your business information</h1>
      }
    </div>
    <div
      class="flex items-center bg-[#f8f8f8] py-6 px-8 rounded-lg mb-10 gap-24 max-[667px]:flex-wrap max-[667px]:gap-6 max-[667px]:justify-center"
    >
      <div class="">
        <img
          src="./../../../../assets/images/svgs/paperAndPencil.svg"
          alt="Edit Business Info"
        />
      </div>
      <div>
        <h2
          class="md:text-base font-semibold max-[667px]::text-sm max-[667px]:mb-1"
        >
          Your storefront features information about your wedding services to
          attract and convert our audience of engaged couples.
        </h2>
        <p class="md:text-[#6c6c6c] md:text-sm max-[667px]::text-xs">
          It's important that all the information on your storefront is up to
          date and accurate.
        </p>
      </div>
    </div>
    <form [formGroup]="formBusinessInfo" (ngSubmit)="onSubmit()">
      <div class="mb-6">
        <h2 class="text-lg font-semibold mb-4">
          Business information <span class="text-red-500">*</span>
        </h2>

        <div class="bg-[#e9f6f8] py-4 px-4 rounded-lg mb-4">
          Lead notifications and updates from Bonheur will be sent to this email
          address.
        </div>

        <div class="py-6 px-6 border border-[#d9d9d9] border-solid rounded-lg">
          <div class="max-w-sm">
            <div class="flex flex-col pt-2">
              <mat-label class="mat-subtitle-2 f-s-14 f-w-600 m-b-12 d-block"
                >Email <span class="text-red-500">*</span></mat-label
              >
              <div class="flex items-center w-full gap-10">
                <div class="w-5/6">
                  <mat-form-field
                    appearance="fill"
                    class="w-full"
                    color="primary"
                  >
                    <input
                      matInput
                      type="email"
                      disabled
                      [value]="formBusinessInfo.get('email')?.value"
                    />
                  </mat-form-field>
                </div>

                <div class="w-1/6">
                  <a
                    class="underline text-xs cursor-pointer hover:text-orange-500"
                    >Change</a
                  >
                </div>
              </div>
            </div>
            <div class="flex flex-col pt-2">
              <mat-label class="mat-subtitle-2 f-s-14 f-w-600 m-b-12 d-block"
                >Name <span class="text-red-500">*</span></mat-label
              >
              <mat-form-field
                appearance="outline"
                class="w-100"
                color="primary"
              >
                <input
                  matInput
                  type="text"
                  formControlName="name"
                  required
                  [class.is-invalid]="
                    formBusinessInfo.get('name')?.invalid &&
                    formBusinessInfo.get('name')?.touched
                  "
                  placeholder="Enter your business name"
                />
                @if(formBusinessInfo.get('name')?.hasError('required')) {
                <mat-error style="font-size: 12px">
                  Name is required
                </mat-error>
                } @if (formBusinessInfo.get('name')?.hasError('minlength')) {
                <mat-error style="font-size: 12px">
                  Name must be at least 2 characters
                </mat-error>
                } @if (formBusinessInfo.get('name')?.hasError('maxlength')) {
                <mat-error style="font-size: 12px">
                  Name must be at most 50 characters
                </mat-error>
                }
              </mat-form-field>
            </div>
            <div class="flex flex-col pt-2">
              <mat-label class="mat-subtitle-2 f-s-14 f-w-600 m-b-12 d-block"
                >Phone Number <span class="text-red-500">*</span></mat-label
              >
              <mat-form-field
                appearance="outline"
                class="w-100"
                color="primary"
              >
                <input
                  matInput
                  type="text"
                  formControlName="phoneNumber"
                  required
                  [class.is-invalid]="
                    formBusinessInfo.get('phoneNumber')?.invalid &&
                    formBusinessInfo.get('phoneNumber')?.touched
                  "
                  placeholder="Enter your phone number"
                />
                @if(formBusinessInfo.get('phoneNumber')?.hasError('required')) {
                <mat-error style="font-size: 12px">
                  Phone number is required
                </mat-error>
                } @if(formBusinessInfo.get('phoneNumber')!.hasError('pattern'))
                {
                <mat-error class="fs-14"> Phone number is invalid </mat-error>
                }
              </mat-form-field>
            </div>
            <div class="flex flex-col pt-2">
              <mat-label class="mat-subtitle-2 f-s-14 f-w-600 m-b-12 d-block"
                >Main business category
                <span class="text-red-500">*</span></mat-label
              >
              <mat-form-field
                appearance="outline"
                class="w-full"
                color="primary"
              >
                <mat-select
                  formControlName="categoryId"
                  [class.is-invalid]="
                    formBusinessInfo.get('categoryId')?.invalid &&
                    formBusinessInfo.get('categoryId')?.touched
                  "
                >
                  @for (supplier of supplierCategories; track $index) {
                  <mat-option [value]="supplier.id">{{
                    supplier.name
                  }}</mat-option>
                  }
                </mat-select>
                @if(formBusinessInfo.get('categoryId')?.hasError('required')) {
                <mat-error style="font-size: 12px">
                  Main business category is required
                </mat-error>
                }
              </mat-form-field>
            </div>
            <div class="flex flex-col pt-2">
              <mat-label class="mat-subtitle-2 f-s-14 f-w-600 m-b-12 d-block"
                >Response Time (Ex: 8h-20h, 24/24)
                <span class="text-red-500">*</span></mat-label
              >
              <mat-form-field
                appearance="outline"
                class="w-100"
                color="primary"
              >
                <input
                  matInput
                  type="text"
                  formControlName="responseTime"
                  required
                  [class.is-invalid]="
                    formBusinessInfo.get('responseTime')?.invalid &&
                    formBusinessInfo.get('responseTime')?.touched
                  "
                  placeholder="Enter your response time"
                />
                @if(formBusinessInfo.get('responseTime')?.hasError('required'))
                {
                <mat-error style="font-size: 12px">
                  Response time is required
                </mat-error>
                }
              </mat-form-field>
            </div>
            <div class="mb-4 flex flex-col pt-2">
              <mat-label class="mat-subtitle-2 f-s-14 f-w-600 m-b-12 d-block"
                >Website URL
              </mat-label>
              <mat-form-field
                appearance="outline"
                class="w-100"
                color="primary"
              >
                <input
                  matInput
                  type="text"
                  formControlName="websiteUrl"
                  [class.is-invalid]="
                    formBusinessInfo.get('websiteUrl')?.invalid &&
                    formBusinessInfo.get('websiteUrl')?.touched
                  "
                  placeholder="Enter your website URL"
                />
              </mat-form-field>
            </div>
            <div class="mb-4 flex flex-col pt-2">
              <mat-label class="mat-subtitle-2 f-s-14 f-w-600 m-b-12 d-block"
                >Price Starting From (VNƒê) <span class="text-red-500">*</span>
              </mat-label>
              <mat-form-field
                appearance="outline"
                class="w-100"
                color="primary"
              >
                <input
                  matInput
                  type="number"
                  formControlName="price"
                  [class.is-invalid]="
                    formBusinessInfo.get('price')?.invalid &&
                    formBusinessInfo.get('price')?.touched
                  "
                  min="0"
                  placeholder="Enter your price"
                />
                @if(formBusinessInfo.get('price')?.hasError('required')) {
                <mat-error style="font-size: 12px">
                  Price is required
                </mat-error>
                }
              </mat-form-field>
            </div>
          </div>
        </div>
      </div>
      <div>
        <h2 class="text-lg font-semibold mb-4">
          Describe your business and services
          <span class="text-red-500">*</span>
        </h2>

        <div class="bg-[#e9f6f8] py-4 px-4 rounded-lg mb-4">
          <p>
            Want to impress couples? Introduction time! Explain why your
            business is the key ingredient in their wedding. Our team of writers
            will use the information you provide to create an eye-catching ad.
          </p>
          <div>
            <p>
              <span class="font-semibold mr-1">Pro tip: </span> Describe your
              products and services. Explain how you work with couples. Share a
              sweet or surprising anecdote. No contact details, please.
            </p>
          </div>
        </div>
        @if (Editor && config) {
        <div class="mb-6">
          <ckeditor
            class="w-full"
            tagName="textarea"
            formControlName="description"
            [editor]="Editor"
            [config]="config"
            [class.is-invalid]="
              formBusinessInfo.get('description')?.invalid &&
              formBusinessInfo.get('description')?.touched
            "
            (blur)="formBusinessInfo.get('description')?.markAsTouched()"
          >
          </ckeditor>
          @if (formBusinessInfo.get('description')?.touched) { @if
          (formBusinessInfo.get('description')?.hasError('required')) {
          <mat-error class="mt-2"> Description is required </mat-error>
          } @if (formBusinessInfo.get('description')?.hasError('minlength')) {
          <mat-error class="mt-2">
            Description must be at least 100 characters
          </mat-error>
          } @if (formBusinessInfo.get('description')?.hasError('maxlength')) {
          <mat-error class="mt-2">
            Description must be at most 10000 characters
          </mat-error>
          } }
        </div>

        }
        <div>
          <p class="text-sm text-[#6c6c6c] mb-4">
            Published content must meet Bonheur's
            <a
              class="cursor-pointer underline hover:text-primary"
              routerLink="/"
            >
              Terms of Use.</a
            >
          </p>
          <button
            mat-raised-button
            color="primary"
            style="padding: 20px"
            class="font-bold"
          >
            Save Changes
          </button>
        </div>
      </div>
    </form>
  </div>
</section>
