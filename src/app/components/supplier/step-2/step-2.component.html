<section class="py-10">
  <div class="container mx-auto">
    <div
      class="flex justify-start items-center mb-10 hover:text-red-500 cursor-pointer"
      routerLink="/supplier/onboarding"
    >
      <mat-icon class="mr-2"><i-tabler name="arrow-left"></i-tabler></mat-icon>
      <span class="font-semibold text-base underline">Back</span>
    </div>
    <div class="mb-6">
      <h1 class="text-2xl font-bold">Add your address</h1>
    </div>
    <div
      class="flex items-center bg-[#f8f8f8] py-6 px-8 rounded-lg mb-10 gap-24 flex-wrap"
    >
      <div>
        <svg
          width="64px"
          height="64px"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          stroke="#878787"
        >
          <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
          <g
            id="SVGRepo_tracerCarrier"
            stroke-linecap="round"
            stroke-linejoin="round"
          ></g>
          <g id="SVGRepo_iconCarrier">
            <path
              d="M12 6H12.01M9 20L3 17V4L5 5M9 20L15 17M9 20V14M15 17L21 20V7L19 6M15 17V14M15 6.2C15 7.96731 13.5 9.4 12 11C10.5 9.4 9 7.96731 9 6.2C9 4.43269 10.3431 3 12 3C13.6569 3 15 4.43269 15 6.2Z"
              stroke="#616161"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            ></path>
          </g>
        </svg>
      </div>
      <div>
        <h2 class="text-base font-semibold mb-2">
          Update your business location by adding your address.
        </h2>
        <p class="text-[#6c6c6c]">
          Address must contain the street name and any additional information
          (building number, floor, suite, etc.).
        </p>
      </div>
    </div>
    <div class="mb-6">
      <h1 class="text-lg font-semibold">Location details</h1>
    </div>
    <div class="mb-6">
      <form
        [formGroup]="formLocation"
        class="py-6 px-6 border border-[#d9d9d9] border-solid rounded-lg"
      >
        <div class="w-full px-4 mb-4">
          <div class="flex flex-wrap items-center">
            <div class="flex flex-col md:w-2/3">
              <mat-label class="mat-subtitle-2 f-s-14 f-w-600 m-b-12 d-block"
                >Street<span class="text-red-500">*</span></mat-label
              >
              <mat-form-field
                appearance="outline"
                class="w-100"
                color="primary"
              >
                <input
                  matInput
                  type="text"
                  formControlName="street"
                  required
                  [class.is-invalid]="
                    formLocation.get('street')?.invalid &&
                    formLocation.get('street')?.touched
                  "
                  placeholder="Enter your street"
                />
                @if(formLocation.get('street')?.hasError('required')) {
                <mat-error style="font-size: 12px">
                  Street is required
                </mat-error>
                } @if(formLocation.get('street')?.hasError('minlength')) {
                <mat-error style="font-size: 12px">
                  Street must be at least 2 characters
                </mat-error>
                } @if(formLocation.get('street')?.hasError('maxlength')) {
                <mat-error style="font-size: 12px">
                  Street must be at most 50 characters
                </mat-error>
                }
              </mat-form-field>
            </div>
            <div class="md:w-1/3 flex justify-center">
              <button
                mat-stroked-button
                color="accent"
                style="padding: 20px"
                class="flex items-center"
                (click)="btnUpdateMap()"
              >
                Update map
                <mat-icon matIconPrefix>loop</mat-icon>
              </button>
            </div>
          </div>

          <div class="flex flex-wrap">
            <div class="w-full md:w-1/3">
              <mat-label class="mat-subtitle-2 f-s-14 f-w-600 m-b-12 d-block"
                >Province<span class="text-red-500">*</span></mat-label
              >
              <mat-form-field appearance="outline" class="w-full">
                <mat-select
                  formControlName="province"
                  placeholder="Chọn tỉnh/thành phố"
                >
                  @for (province of provinceList; track $index) {
                  <mat-option
                    [value]="province.provinceName"
                    (click)="onProvinceChange(province.provinceId)"
                  >
                    {{ province.provinceName }}
                  </mat-option>
                  }
                </mat-select>
                @if(formLocation.get('province')?.hasError('required')) {
                <mat-error class="text-sm">
                  Tỉnh/Thành phố không được để trống
                </mat-error>
                }
              </mat-form-field>
            </div>
            <div class="w-full md:w-1/3 md:px-2">
              <mat-label class="mat-subtitle-2 f-s-14 f-w-600 m-b-12 d-block"
                >District<span class="text-red-500">*</span></mat-label
              >
              <mat-form-field appearance="outline" class="w-full">
                <mat-select
                  formControlName="district"
                  placeholder="Chọn quận/huyện"
                >
                  @for (district of districtList; track $index) {
                  <mat-option
                    [value]="district.districtName"
                    (click)="onDistrictChange(district.districtId)"
                  >
                    {{ district.districtName }}
                  </mat-option>
                  }
                </mat-select>
                @if(formLocation.get('district')?.hasError('required')) {
                <mat-error class="text-sm">
                  Quận/Huyện không được để trống
                </mat-error>
                }
              </mat-form-field>
            </div>
            <div class="w-full md:w-1/3 md:px-2">
              <mat-label class="mat-subtitle-2 f-s-14 f-w-600 m-b-12 d-block"
                >Ward<span class="text-red-500">*</span></mat-label
              >
              <mat-form-field appearance="outline" class="w-full">
                <mat-select formControlName="ward" placeholder="Chọn phường/xã">
                  @for (commune of wardList; track $index) {
                  <mat-option
                    [value]="commune.communeName"
                    (click)="onWardChange(commune.communeId)"
                  >
                    {{ commune.communeName }}
                  </mat-option>
                  }
                </mat-select>
                @if(formLocation.get('ward')?.hasError('required')) {
                <mat-error class="text-sm">
                  Phường/Xã không được để trống
                </mat-error>
                }
              </mat-form-field>
            </div>
          </div>
        </div>
        <div class="px-4">
          <button
            (click)="btnUpdateSupplierAddress()"
            mat-raised-button
            color="accent"
          >
            Save changes
          </button>
        </div>
      </form>
    </div>
    <div class="map-wrap">
      <div class="map" #map></div>
    </div>
  </div>
</section>
